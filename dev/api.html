<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Documentation · RayTracer</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>RayTracer</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><span class="toctext">Getting Started</span><ul><li><a class="toctext" href="getting_started/rendering.html">Rendering</a></li><li><a class="toctext" href="getting_started/optimization.html">Inverse Rendering</a></li></ul></li><li class="current"><a class="toctext" href="api.html">API Documentation</a><ul class="internal"><li><a class="toctext" href="#General-Utilities-1">General Utilities</a></li><li><a class="toctext" href="#Differentiation-1">Differentiation</a></li><li><a class="toctext" href="#Scene-Configuration-1">Scene Configuration</a></li><li><a class="toctext" href="#Renderers-1">Renderers</a></li><li><a class="toctext" href="#Optimization-1">Optimization</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="api.html">API Documentation</a></li></ul><a class="edit-page" href="https://github.com/avik-pal/RayTracer.jl/blob/master/docs/src/api.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>API Documentation</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="API-Documentation-1" href="#API-Documentation-1">API Documentation</a></h1><h2><a class="nav-anchor" id="General-Utilities-1" href="#General-Utilities-1">General Utilities</a></h2><p>List of the General Functions and Types provided by the RayTracer. Most of the other functionalities are built upon these.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.Vec3" href="#RayTracer.Vec3"><code>RayTracer.Vec3</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>This is the central type for RayTracer. All of the other types are defined building upon this.                                                      </p><p>All the fields of the Vec3 instance contains <code>Array</code>s. This ensures that we can collect the gradients w.r.t the fields using the <code>Params</code> API of Zygote.</p><p><strong>Defined Operations for Vec3:</strong></p><ul><li><code>+</code>, <code>-</code>, <code>*</code> – These operations will be broadcasted even though there is no explicit                  mention of broadcasting.</li><li><code>dot</code>, <code>l2norm</code></li><li><code>cross</code></li><li><code>clamp</code>, <code>clip01</code></li><li><code>zero</code>, <code>similar</code>, <code>one</code></li><li><code>place</code></li><li><code>maximum</code>, <code>minimum</code></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/utils.jl#L9-L26">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.rgb" href="#RayTracer.rgb"><code>RayTracer.rgb</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p><code>rgb</code> is an alias for <code>Vec3</code>. It makes more sense to use this while defining colors. </p></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/utils.jl#L131-L133">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.get_image-Union{Tuple{T}, Tuple{Vec3{T},Any,Any}} where T" href="#RayTracer.get_image-Union{Tuple{T}, Tuple{Vec3{T},Any,Any}} where T"><code>RayTracer.get_image</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">get_image(image, width, height)</code></pre><p>Reshapes and normalizes a Vec3 color format to the RGB format of Images for easy loading, saving and visualization.</p></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/imutils.jl#L20-L25">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.zeroonenorm-Tuple{Any}" href="#RayTracer.zeroonenorm-Tuple{Any}"><code>RayTracer.zeroonenorm</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">zeroonenorm(x::AbstractArray)</code></pre><p>Normalizes the elements of the array to values between <code>0</code> and <code>1</code>. It is recommended to use ths function for doing this simple operation because the adjoint for this function is incorrect in <code>Zygote</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/imutils.jl#L38-L44">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.FixedParams" href="#RayTracer.FixedParams"><code>RayTracer.FixedParams</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-julia">FixedParams</code></pre><p>Any subtype of FixedParams is not optimized using the <code>update!</code> API. For example, we don&#39;t want the screen size to be altered while inverse rendering, this is ensured by wrapping those parameters in a subtype of FixedParams.</p></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/utils.jl#L241-L247">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.@diffops-Tuple{Any}" href="#RayTracer.@diffops-Tuple{Any}"><code>RayTracer.@diffops</code></a> — <span class="docstring-category">Macro</span>.</div><div><div><pre><code class="language-julia">@diffops MyType::DataType</code></pre><p>Generates functions for performing gradient based optimizations on this custom type. 5 functions are generated.</p><ol><li><code>x::MyType + y::MyType</code> – For Gradient Accumulation</li><li><code>x::MyType - y::MyType</code> – For Gradient Based Updates</li><li><code>x::MyType * η&lt;:Real</code> – For Multiplication of the Learning Rate with Gradient</li><li><code>η&lt;:Real   * x::MyType</code> – For Multiplication of the Learning Rate with Gradient</li><li><code>x::MyType * y::MyType</code> – Just for the sake of completeness.</li></ol><p>Most of these functions do not make semantic sense. For example, adding 2 <code>PointLight</code> instances do not make sense but in case both of them are gradients, it makes perfect sense to accumulate them in a third <code>PointLight</code> instance.</p></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/utils.jl#L198-L213">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.bigmul-Tuple{Any}" href="#RayTracer.bigmul-Tuple{Any}"><code>RayTracer.bigmul</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">bigmul(x)</code></pre><p>Returns the output same as <code>typemax</code>. However, in case gradients are computed, it will return the gradient to be <code>0</code> instead of <code>nothing</code> as in case of typemax.</p></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/utils.jl#L182-L187">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.extract-Union{Tuple{T}, Tuple{Any,T}} where T&lt;:Number" href="#RayTracer.extract-Union{Tuple{T}, Tuple{Any,T}} where T&lt;:Number"><code>RayTracer.extract</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">extract(cond, x&lt;:Number)
extract(cond, x&lt;:AbstractArray)
extract(cond, x::Vec3)</code></pre><p>Extracts the elements of <code>x</code> (in case it is an array) for which the indices corresponding to the <code>cond</code> are <code>true</code>.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p><code>extract</code> has a performance penalty when used on GPUs.</p></div></div><p><strong>Example:</strong></p><pre><code class="language-julia">julia&gt; a = rand(4)
4-element Array{Float64,1}:
 0.7201598586590607 
 0.5829718552672327 
 0.1177531256556108 
 0.3083157590071375 

julia&gt; cond = a .&gt; 0.5
4-element BitArray{1}:
  true
  true
 false
 false

julia&gt; RayTracer.extract(cond, a)
2-element Array{Float64,1}:
 0.7201598586590607
 0.5829718552672327</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/utils.jl#L140-L173">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.improcess-Tuple{Any,Any,Any}" href="#RayTracer.improcess-Tuple{Any,Any,Any}"><code>RayTracer.improcess</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">improcess(color_vector, width, height)</code></pre><p>Normalizes the Color Dimension and reshapes it to the given configuration.</p></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/imutils.jl#L9-L14">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.place-Tuple{Vec3,Any}" href="#RayTracer.place-Tuple{Vec3,Any}"><code>RayTracer.place</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">place(a::Vec3, cond)</code></pre><p>Constructs a new <code>Vec3</code> with array length equal to that of <code>cond</code> filled with zeros. Then it fills the positions corresponding to the <code>true</code> values of <code>cond</code> with the values in <code>a</code>.</p><p>The length of each array in <code>a</code> must be equal to the number of <code>true</code> values in the  <code>cond</code> array.</p></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/utils.jl#L98-L107">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.get_params" href="#RayTracer.get_params"><code>RayTracer.get_params</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">get_params(x)</code></pre><p>Get the parameters from a struct that can be tuned. The output is in the form of an array.</p></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/gradients/numerical.jl#L38-L43">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.set_params!" href="#RayTracer.set_params!"><code>RayTracer.set_params!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">set_params!(x, y::AbstractArray)</code></pre><p>Sets the tunable parameters of the struct <code>x</code>. The index of the last element set into the struct is returned as output. This may be used to confirm that the size of the input array was as expected.</p><p><strong>Example</strong></p><pre><code class="language-julia">julia&gt; scene = Triangle(Vec3(-1.9, 1.3, 0.1), Vec3(1.2, 1.1, 0.3), Vec3(0.8, -1.2, -0.15),
                    color = rgb(1.0, 1.0, 1.0), reflection = 0.5)
Triangle{Array{Float64,1}}(Vec3{Array{Float64,1}}([-1.9], [1.3], [0.1]), Vec3{Array{Float64,1}}([1.2], [1.1], [0.3]), Vec3{Array{Float64,1}}([0.8], [-1.2], [-0.15]), RayTracer.Material{RayTracer.PlainColor,Float64}(RayTracer.PlainColor(Vec3{Array{Float64,1}}([1.0], [1.0], [1.0])), 0.5))

julia&gt; x = rand(13)
13-element Array{Float64,1}:
 0.39019817669623835
 0.940810689314205
 .
 .
 .
 0.5590307650917048
 0.7551647340674075

julia&gt; RayTracer.set_params!(scene, x)
13</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/gradients/numerical.jl#L51-L78">source</a></section><h2><a class="nav-anchor" id="Differentiation-1" href="#Differentiation-1">Differentiation</a></h2><p>The recommended mode of differentation is by Automatic Differentiation using <a href="https://github.com/FluxML/Zygote.jl">Zygote</a>. Refer to the <code>Zygote</code> docs for this. The API listed below is for numerical differentiation and is very restrictive in its current form.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.ngradient" href="#RayTracer.ngradient"><code>RayTracer.ngradient</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">ngradient(f, xs::AbstractArray...)</code></pre><p>Computes the numerical gradients of <code>f</code> w.r.t <code>xs</code>. The function <code>f</code> must return a scalar value for this to work. This function is not meant for general usage as the value of the parameter <code>δ</code> has been tuned for this package specifically.</p><p>Also, it should be noted that these gradients are highly unstable and should be used only for confirming the values obtained through other methods. For meaningful results be sure to use <code>Float64</code> as <code>Float32</code> is too numerically unstable.</p></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/gradients/numerical.jl#L7-L17">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.numderiv" href="#RayTracer.numderiv"><code>RayTracer.numderiv</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">numderiv(f, θ)
numderiv(f, θ::AbstractArray)
numderiv(f, θ::Real)</code></pre><p>Compute the numerical derivates wrt one of the scene parameters. The parameter passed cannot be enclosed in an Array, thus making this not a general method for differentiation.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>This is not a generalized method for getting the gradients. For that please use Zygote. However, this can be used to debug you model, incase you feel the gradients obtained by other methods is sketchy.</p></div></div></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/gradients/numerical.jl#L100-L114">source</a></section><h2><a class="nav-anchor" id="Scene-Configuration-1" href="#Scene-Configuration-1">Scene Configuration</a></h2><h3><a class="nav-anchor" id="Camera-1" href="#Camera-1">Camera</a></h3><h3><a class="nav-anchor" id="Light-1" href="#Light-1">Light</a></h3><h3><a class="nav-anchor" id="Materials-1" href="#Materials-1">Materials</a></h3><h3><a class="nav-anchor" id="Objects-1" href="#Objects-1">Objects</a></h3><h2><a class="nav-anchor" id="Renderers-1" href="#Renderers-1">Renderers</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.raytrace-Union{Tuple{L}, Tuple{Vec3,Vec3,Array{T,1} where T,L,Vec3}, Tuple{Vec3,Vec3,Array{T,1} where T,L,Vec3,Int64}} where L&lt;:RayTracer.Light" href="#RayTracer.raytrace-Union{Tuple{L}, Tuple{Vec3,Vec3,Array{T,1} where T,L,Vec3}, Tuple{Vec3,Vec3,Array{T,1} where T,L,Vec3,Int64}} where L&lt;:RayTracer.Light"><code>RayTracer.raytrace</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">raytrace(origin::Vec3, direction::Vec3, scene::Vector, lgt::Light, eye_pos::Vec3, bounce::Int)
raytrace(origin::Vec3, direction::Vec3, scene::Vector, lgt::Vector{Light}, eye_pos::Vec3, bounce::Int)</code></pre><p>Computes the color contribution to every pixel by tracing every single ray. Internally it calls the <code>light</code> function which implements Blinn Phong Rendering and adds up the color contribution for each object.</p><p>The <code>eye_pos</code> is simply the <code>origin</code> when called by the user. However, the origin keeps changing across the recursive calls to this function and hence it is necessary to keep track of the <code>eye_pos</code> separately.</p><p>The <code>bounce</code> parameter allows the configuration of global illumination. To turn off global illumination set the <code>bounce</code> parameter to <code>&gt;= 2</code>. As expected rendering is much faster if global illumination is off but at the same time is much less photorealistic.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>The support for multiple lights is primitive as we loop over the lights. Even though it is done in a parallel fashion, it is not the best way to do so. Nevertheless it exists just for the sake of experimentation.</p></div></div></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/renderers/blinnphong.jl#L48-L68">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.light-Union{Tuple{L}, Tuple{S}, Tuple{S,Any,Any,Any,L,Any,Any,Any,Any}} where L&lt;:RayTracer.Light where S&lt;:RayTracer.Object" href="#RayTracer.light-Union{Tuple{L}, Tuple{S}, Tuple{S,Any,Any,Any,L,Any,Any,Any,Any}} where L&lt;:RayTracer.Light where S&lt;:RayTracer.Object"><code>RayTracer.light</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">light(s::Object, origin, direction, dist, lgt::Light, eye_pos, scene, obj_num, bounce)</code></pre><p>Implements the Blinn Phong rendering algorithm. This function is merely for internal usage and should in no case be called by the user. This function is quite general and supports user defined <strong>Objects</strong>. For support of custom Objects have a look at the examples.</p></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/renderers/blinnphong.jl#L7-L14">source</a></section><h2><a class="nav-anchor" id="Optimization-1" href="#Optimization-1">Optimization</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="RayTracer.update!-Tuple{Any,AbstractArray,AbstractArray}" href="#RayTracer.update!-Tuple{Any,AbstractArray,AbstractArray}"><code>RayTracer.update!</code></a> — <span class="docstring-category">Method</span>.</div><div><div><pre><code class="language-julia">update!(opt, x, Δ)</code></pre><p>Provides an interface to use all of the Optimizers provided by Flux. The type of <code>x</code> can be anything as long as the operations defined by <code>@diffops</code> are available for it. By default all the differentiable types inside the Package can be used with it.</p><p>The type of <code>Δ</code> must be same as that of <code>x</code>. This prevent silent type conversion of <code>x</code> which can significantly slow doen the raytracer.</p><p><strong>Example:</strong></p><pre><code class="language-julia">opt = ADAM()

gs = gradient(loss_function, θ)

update!(opt, θ, gs[1])</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/avik-pal/RayTracer.jl/blob/182bf0747be85a2da9e92753a7bc202e4b0c51eb/src/optimize.jl#L9-L29">source</a></section><footer><hr/><a class="previous" href="getting_started/optimization.html"><span class="direction">Previous</span><span class="title">Inverse Rendering</span></a></footer></article></body></html>
